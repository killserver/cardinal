AddDefaultCharset UTF-8
Options -Indexes

<IfModule mod_http2.c>
	# for a https server
	Protocols h2 http/1.1
	# for a http server
	Protocols h2c http/1.1
</IfModule>


# Prevent viewing of .htaccess file
<Files .htaccess>
	order allow,deny
	deny from all
</Files>

<ifModule mod_expires.c>
	# Turn on Expires and set default to 0
	ExpiresActive On
	ExpiresDefault A0

	# Set up caching on media files for 1 year (forever?)
	<FilesMatch "\.(flv|ico|pdf|avi|mov|ppt|doc|mp3|wmv|wav)$">
		ExpiresDefault A29030400
	</FilesMatch>

	# Set up caching on media files for 1 week
	<FilesMatch "\.(gif|jpg|jpeg|png|swf)$">
		ExpiresDefault A604800
	</FilesMatch>

	# Set up 2 Hour caching on commonly updated files
	<FilesMatch "\.(xml|txt|html|js|css)$">
		ExpiresDefault A7200
	</FilesMatch>

	# Force no caching for dynamic files
	<FilesMatch "\.(php|cgi|pl|htm|manifest)$">
		ExpiresActive Off
	</FilesMatch>
</ifModule>
<ifModule mod_headers.c>
	# Set up caching on media files for 1 year (forever?)
	<FilesMatch "\.(flv|ico|pdf|avi|mov|ppt|doc|mp3|wmv|wav)$">
		Header append Cache-Control "public"
	</FilesMatch>

	# Set up caching on media files for 1 week
	<FilesMatch "\.(gif|jpg|jpeg|png|swf)$">
		Header append Cache-Control "public"
	</FilesMatch>

	# Set up 2 Hour caching on commonly updated files
	<FilesMatch "\.(xml|txt|html|js|css)$">
		Header append Cache-Control "proxy-revalidate"
	</FilesMatch>

	# Force no caching for dynamic files
	<FilesMatch "\.(php|cgi|pl|htm|manifest)$">
		Header set Cache-Control "private, no-cache, no-store, proxy-revalidate, no-transform"
		Header set Pragma "no-cache"
	</FilesMatch>
</ifModule>
<IfModule mod_deflate.c>
	<FilesMatch "\.(js|css|html|htm|php|xml|ttf|otf|eot|svg)$">
		SetOutputFilter DEFLATE
	</FilesMatch>
</ifModule>


<IfModule mod_gzip.c>
	mod_gzip_on Yes
	mod_gzip_dechunk Yes
	mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$ 
	mod_gzip_item_include handler ^cgi-script$
	mod_gzip_item_include mime ^text\.*
	mod_gzip_item_include mime ^application/x-javascript.*
	mod_gzip_item_exclude mime ^image\.*
	mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.* 
</IfModule>

<IfModule mod_deflate.c>
	AddOutputFilterByType DEFLATE application/javascript
	AddOutputFilterByType DEFLATE text/javascript
	AddOutputFilterByType DEFLATE text/css
	<IfModule mod_setenvif.c>
		BrowserMatch ^Mozilla/4 gzip-only-text/html
		BrowserMatch ^Mozilla/4\.0[678] no-gzip
		BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
	</IfModule>
</IfModule>
FileETag None

<IfModule mod_rewrite.c>
	RewriteEngine On
	<Files .*>
		Order Deny,Allow
		Deny From All
	</Files>
	RewriteRule ^changelog.txt$ changelog.php [L]
	RewriteCond %{REQUEST_FILENAME} !-d
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule .* index.php/$0 [PT]
</IfModule>