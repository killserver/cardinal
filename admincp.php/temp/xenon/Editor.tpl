<div class="row">
	<div class="col-md-3" id="fileTree">
	{dir}
	</div>
	<div class="col-md-9">
		<div name="editor" id="editor" style="height:420px;"></div>
	</div>
	<div class="col-md-12">
		<button class="btn btn-turquoise send pull-right">Save</button>
	</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ace.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ext-chromevox.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ext-emmet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ext-language_tools.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ext-modelist.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ext-old_ie.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ext-searchbox.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ext-spellcheck.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ext-textarea.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-apache_conf.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-actionscript.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-asciidoc.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-csharp.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-css.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-diff.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-dot.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-html.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-ini.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-javascript.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-json.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-less.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-makefile.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-mysql.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-php.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-sass.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-scss.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-sql.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-sqlserver.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-svg.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-text.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/mode-xml.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/apache_conf.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/actionscript.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/asciidoc.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/csharp.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/css.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/diff.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/dot.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/html.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/ini.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/javascript.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/json.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/less.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/makefile.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/mysql.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/php.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/sass.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/scss.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/sql.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/sqlserver.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/svg.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/text.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/snippets/xml.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/theme-eclipse.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/worker-css.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/worker-html.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/worker-javascript.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/worker-json.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/worker-php.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/worker-xml.js"></script>


<script src="https://labs.abeautifulsite.net/archived/jquery-fileTree/demo/jqueryFileTree.js"></script>
<link href="https://labs.abeautifulsite.net/archived/jquery-fileTree/demo/jqueryFileTree.css" rel="stylesheet" type="text/css">
<script>
var editor = ace.edit("editor");
var type = "text";
var dataGet = "";
function loadFile(file) {
	$.post("./?pages=Editor&getType="+file, function(data) {
		type = data;
		$.post("./?pages=Editor&load="+file, function(datas) {
			dataGet = datas.replace(/<\\\?php/, "<?");
			editor.setValue(dataGet, -1);
			editor.getSession().setMode("ace/mode/"+type);
			editor.getSession().setTabSize(4);
			editor.getSession().setUseSoftTabs(true);
			editor.getSession().setUseWrapMode(true);
			editor.setHighlightActiveLine(false);
			editor.setReadOnly(false);
			editor.resize();
			editor.setTheme("ace/theme/eclipse");
		});
	});
}
//loadFile('{file}');
jQuery('#fileTree').fileTree({ root: '/', script: './?pages=Editor&tree=1', folderEvent: 'dblclick', expandSpeed: 1, collapseSpeed: 1 }, function(file) { 
	loadFile(file);
});
$(".send").click(function() {
	$.post("./?pages=Editor&save={file}", {data: editor.getValue()}, function(data) {
		toastr.info(data, "Saved");
	});
});
var disableAllEditors = true;
</script>

<style>#fileTree{max-height:420px;overflow:auto}</style>