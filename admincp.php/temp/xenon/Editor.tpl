<div class="row">
	<div class="col-md-2" id="fileTree">
	{dir}
	</div>
	<div class="col-md-10">
		<div name="editor" id="editor" style="height:420px;"></div>
	</div>
	<div class="col-md-12">
		<button class="btn send">Save</button>
	</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ace.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ext-emmet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ext-language_tools.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ext-old_ie.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ext-searchbox.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ext-spellcheck.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ext-textarea.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-apache_conf.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-actionscript.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-asciidoc.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-csharp.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-css.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-diff.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-dot.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-html.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-ini.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-javascript.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-json.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-less.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-makefile.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-mysql.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-php.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-sass.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-scss.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-sql.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-sqlserver.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-svg.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-text.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/mode-xml.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/apache_conf.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/actionscript.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/asciidoc.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/csharp.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/css.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/diff.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/dot.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/html.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/ini.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/javascript.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/json.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/less.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/makefile.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/mysql.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/php.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/sass.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/scss.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/sql.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/sqlserver.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/svg.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/text.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/snippets/xml.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/theme-github.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/worker-css.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/worker-html.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/worker-javascript.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/worker-json.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/worker-php.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/worker-xml.js"></script>


<script src="http://labs.abeautifulsite.net/archived/jquery-fileTree/demo/jqueryFileTree.js"></script>
<link href="http://labs.abeautifulsite.net/archived/jquery-fileTree/demo/jqueryFileTree.css" rel="stylesheet" type="text/css">
<script>
var editor = ace.edit("editor");
var type = "text";
function loadFile(file) {
	$.post("./?pages=Editor&getType="+file, function(data) {
		type = data;
		$.post("./?pages=Editor&load="+file, function(data) {
			editor.setValue(data);
			editor.getSession().setMode("ace/mode/"+type);
			editor.getSession().setTabSize(4);
			editor.getSession().setUseSoftTabs(true);
			editor.getSession().setUseWrapMode(true);
			editor.setHighlightActiveLine(false);
			editor.resize();
		});
	});
}
//loadFile('{file}');
jQuery('#fileTree').fileTree({ root: '/', script: './?pages=Editor&tree=1', folderEvent: 'dblclick', expandSpeed: 1, collapseSpeed: 1 }, function(file) { 
	loadFile(file);
	editor.setValue(data);
	editor.getSession().setMode("ace/mode/{typeCode}");
	editor.getSession().setTabSize(4);
	editor.getSession().setUseSoftTabs(true);
	editor.getSession().setUseWrapMode(true);
	editor.setHighlightActiveLine(false);
	editor.resize();
});
$(".send").click(function() {
	$.post("./?pages=Editor&save={file}", {data: editor.getValue()}, function(data) {
		toastr.info(data, "Saved");
	});
});
</script>